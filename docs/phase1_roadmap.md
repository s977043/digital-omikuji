# Phase 1 改善計画 (MVP)

このドキュメントは、Phase 1 の改善項目（「儀式性」「ご褒美感」「シェア」「継続性」）に関するロードマップです。

## エピック: ユーザー定着とエンゲージメントの向上

### Epic Issue (親Issue)
**タイトル**
`feat: MVP改善 (Phase 1) - 儀式・シェア・継続性の強化`

**本文**
```md
## 概要
ユーザー体験を「引く前・引く瞬間・引いた後・翌日」の各フェーズで強化し、
ただの「おみくじアプリ」から「毎日引きたくなる／シェアしたくなるエンタメ」へ昇華させる。

## 目的
1. **儀式性 (Ritual)**: 結果が出るまでの過程を演出し、期待感を最大化する。
2. **ご褒美感 (Reward)**: 結果画面自体をリッチにし、所有欲とシェア欲を満たす。
3. **拡散 (Viral)**: シェアへのゲートと最適化された導線で、自然な拡散を狙う。
4. **継続 (Retention)**: 1日1回制限と履歴機能で、日課としての利用習慣を作る。

## 子Issueリスト
- [ ] #1 抽選中（DrawingOverlay）を追加して“儀式の間”を作る
- [ ] #2 結果ページを巻物UIに刷新 + シェアで詳細解放（ゲート）
- [ ] #3 Xシェア文言をテンプレ化（結果先頭/改行/ハッシュタグ/CTA）
- [ ] #4 1日1回制限 + 履歴（昨日/カレンダー）で継続性を作る
- [ ] #5 デザインサンプル（画面遷移/配色/タイポ）をdocsにまとめる

## 完了条件
全ての「子Issue」が完了し、マージされていること。
```

### Issue 1: 「抽選中」中間画面 (DrawingOverlay) を追加する
**タイトル:** `feat: 抽選中（DrawingOverlay）を追加して“儀式の間”を作る`

**目的:**
- 振る→結果の間に、0.8〜1.2秒程度のアニメーション（抽選中）を挟み、儀式感と期待値を高める。
- 処理中であることを視覚的にフィードバックする。

**スコープ:**
- 抽選開始後に全画面またはモーダルで `DrawingOverlay` を表示。
- アニメーション（回転体、レバー、呼吸する光など）の実装。
- 結果画面への遷移（抽選はシェイク完了時に確定）。
- Hapticsとサウンドの調整。
- 連打防止。

**タスク:**
- [ ] `DrawingOverlay` コンポーネントの作成
- [ ] 状態遷移に `drawing` を追加 (idle -> shaking -> drawing -> revealed)
- [ ] アニメの実装 (Moti/Reanimated)
- [ ] Haptics/Sound の追加
- [ ] 二重遷移防止の実装
- [ ] アクセシビリティ対応

### Issue 2: 結果ページを“巻物”カード化＋「シェアで続き」ゲートを実装
**タイトル:** `feat: 結果ページを巻物UIに刷新 + シェアで詳細解放（ゲート）`

**目的:**
- 結果を「ご褒美（巻物）」として演出し、特別感を出す。
- シェアを詳細コンテンツ閲覧のトリガーにし、拡散を促す。

**スコープ:**
- 巻物風 `ResultCard` の実装。
- 未解放の詳細セクション `LockedSection` の実装。
- シェア実行によるコンテンツ解放ロジック。
- シェア用画像の生成最適化（view-shot）。

**タスク:**
- [ ] `ResultScrollCard` コンポーネント作成
- [ ] レイアウト実装: 運勢 / テーマ / 一言
- [ ] `LockedSection` の実装
- [ ] シェア後の解放処理
- [ ] 詳細項目の追加（ラッキーカラーなど）
- [ ] スクショ生成箇所の修正

### Issue 3: Xシェア文言テンプレを最適化（結果先頭・改行・タグ・CTA）
**タイトル:** `feat: Xシェア文言をテンプレ化（結果先頭/改行/ハッシュタグ/CTA）`

**目的:**
- タイムラインでの視認性を高め、クリック率を上げる。
- 投稿の手間を減らし、投稿率を下支えする。

**テンプレート:**
```text
2026年のエンジニア運勢は
『{運勢}』

#エンジニアおみくじ2026
#{任意タグ}

あなたも占ってみよう👇
{URL}
```

**タスク:**
- [ ] `utils/buildShareText.ts` の作成
- [ ] 文字数制限を考慮したテキスト生成ロジックの実装
- [ ] シェアボタンへの適用
- [ ] URLへの計測パラメータ付与

### Issue 4: 「毎日1回」制限 + 履歴（昨日/カレンダー）を追加
**タイトル:** `feat: 1日1回制限 + 履歴（昨日/カレンダー）で継続性を作る`

**目的:**
- 1日1回のルーチン化を促進する。
- 過去の結果を振り返れるようにし、愛着をわかせる。

**スコープ:**
- `lastDrawDate` と `history[]` のローカル保存。
- 同日に既に引いている場合のUI出し分け。
- 履歴画面（最低でも昨日分、できればカレンダー）の実装。

**タスク:**
- [ ] 永続化の実装 (AsyncStorage/SQLite)
- [ ] 日付判定ロジック（ローカル/タイムゾーン考慮）
- [ ] 履歴画面の作成
- [ ] 「本日の結果」再表示ロジック
- [ ] デバッグ用日付操作機能

### Issue 5: デザインサンプル・ガイドラインをリポジトリに同梱する
**タイトル:** `docs: デザインサンプル（画面遷移/配色/タイポ）をdocsにまとめる`

**目的:**
- デザインの意図とリソースを一元管理し、開発のブレを防ぐ。
- コントリビューションの敷居を下げる。

**スコープ:**
- `docs/design-samples/` への画像格納。
- `docs/ui-guidelines.md` の作成。

**タスク:**
- [ ] デザインサンプル画像の追加
- [ ] `ui-guidelines.md` の作成
- [ ] READMEからのリンク追加
