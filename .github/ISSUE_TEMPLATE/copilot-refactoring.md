---
name: Copilotリファクタリング
about: Copilotにコードリファクタリングをアサインする際のタスク管理テンプレートです
title: '【リファクタリング】[対象]: [改善内容]'
labels: refactoring, copilot-assigned
assignees: copilot
---

# 【リファクタリング】Copilot アサイン用テンプレート

## 1. リファクタリング目的 (提案者)

### 現状の問題
- **対象範囲:** [リファクタリング対象のファイル・モジュール]
- **問題点:**
  - [ ] [問題1 - 例: 可読性が低い]
  - [ ] [問題2 - 例: 重複コードが多い]
  - [ ] [問題3 - 例: パフォーマンスが悪い]
  - [ ] [問題4 - 例: 保守性が低い]

### リファクタリングの目標
- **主目的:** [なぜリファクタリングが必要か]
- **期待効果:**
  - [ ] コードの可読性向上
  - [ ] 保守性の向上
  - [ ] パフォーマンスの改善
  - [ ] テストのしやすさ向上
  - [ ] バグの削減

### ビジネス価値
- **開発効率:** [開発速度への影響]
- **品質向上:** [品質面での改善]
- **技術負債解消:** [技術負債の軽減効果]

## 2. 技術分析 (アーキテクト)

### 現状分析
- **コード複雑度:** [現在のコード複雑度評価]
- **依存関係:** [現在の依存関係の問題]
- **パフォーマンス:** [現在のパフォーマンス問題]
- **テストカバレッジ:** [現在のテスト状況]

### リファクタリング方針
- **アプローチ:** [段階的/一括 などの方針]
- **適用パターン:** [適用するデザインパターン]
- **技術制約:** [既存システムとの互換性など]
- **リスク評価:** [リファクタリングに伴うリスク]

### 対象ファイル・モジュール
```
対象範囲:
├── [ファイル1] - [リファクタリング内容]
├── [ファイル2] - [リファクタリング内容]
├── [ディレクトリ1]/
│   ├── [ファイル3] - [リファクタリング内容]
│   └── [ファイル4] - [リファクタリング内容]
```

### 影響範囲
- **直接影響:** [修正が必要なファイル]
- **間接影響:** [テストが必要なファイル]
- **API変更:** [あり/なし - 詳細]
- **データベース:** [あり/なし - 詳細]

## 3. リファクタリング計画 (Copilot実行者)

### Phase 1: 事前準備
- [ ] **現状把握**
  - [ ] 対象コードの詳細調査
  - [ ] 依存関係の整理
  - [ ] 既存テストの確認
  - [ ] 影響範囲の特定

- [ ] **環境準備**
  - [ ] テスト環境の確認
  - [ ] バックアップの作成
  - [ ] ブランチ戦略の確認

### Phase 2: テスト強化（リファクタリング前）
- [ ] **既存テストの充実**
  - [ ] 不足テストケースの追加
  - [ ] 統合テストの追加
  - [ ] パフォーマンステストの準備
  - [ ] 回帰テストの準備

- [ ] **基準値の計測**
  - [ ] パフォーマンス基準値の計測
  - [ ] メモリ使用量の計測
  - [ ] ビルド時間の計測

### Phase 3: 段階的リファクタリング
- [ ] **Step 1: [具体的なリファクタリング項目1]**
  - [ ] 実装
  - [ ] テスト実行
  - [ ] 動作確認

- [ ] **Step 2: [具体的なリファクタリング項目2]**
  - [ ] 実装
  - [ ] テスト実行
  - [ ] 動作確認

- [ ] **Step 3: [具体的なリファクタリング項目3]**
  - [ ] 実装
  - [ ] テスト実行
  - [ ] 動作確認

### Phase 4: 最終確認・最適化
- [ ] **統合確認**
  - [ ] 全体動作確認
  - [ ] パフォーマンス確認
  - [ ] メモリ使用量確認
  - [ ] エラーハンドリング確認

- [ ] **ドキュメント更新**
  - [ ] コメントの更新
  - [ ] READMEの更新
  - [ ] APIドキュメントの更新

### 利用可能なツール
- **Gemini CLI コマンド:**
  ```bash
  npm run gemini:review       # コードレビュー
  npm run gemini:check-docs   # ドキュメント確認
  npm run dev                 # 開発サーバー
  npm run test               # テスト実行
  npm run build              # ビルド確認
  ```

- **分析ツール:**
  - ESLint - コード品質チェック
  - TypeScript - 型チェック
  - Browser DevTools - パフォーマンス分析

### リファクタリング原則
- **機能の保持:** 外部動作を変更しない
- **段階的実行:** 小さな変更を積み重ねる
- **テスト先行:** テストを書いてからリファクタリング
- **継続的検証:** 各段階でテストを実行
- **コミット粒度:** 論理的な単位でコミット

## 4. 品質保証・テスト (品質保証)

### テスト戦略
- [ ] **機能テスト**
  - [ ] 既存機能の動作確認
  - [ ] エッジケースの確認
  - [ ] エラーハンドリングの確認
  - [ ] API の動作確認

- [ ] **回帰テスト**
  - [ ] 既存テストスイートの実行
  - [ ] 手動テストの実行
  - [ ] 統合テストの実行
  - [ ] E2Eテストの実行

- [ ] **パフォーマンステスト**
  - [ ] 応答時間の測定
  - [ ] メモリ使用量の測定
  - [ ] CPU使用率の測定
  - [ ] ネットワーク使用量の測定

### 品質メトリクス
- [ ] **コード品質**
  - [ ] コード複雑度の改善確認
  - [ ] 重複コードの削減確認
  - [ ] ESLint エラーの解消
  - [ ] TypeScript エラーの解消

- [ ] **保守性**
  - [ ] 可読性の向上確認
  - [ ] 責務の分離確認
  - [ ] 依存関係の改善確認
  - [ ] ドキュメントの充実確認

### ブラウザ・環境テスト
- [ ] 全対象ブラウザでの動作確認
- [ ] 各デバイスでの動作確認
- [ ] 異なるネットワーク環境での確認

## 5. 完了・評価

### 完了条件
- [ ] **機能面**
  - [ ] 全ての既存機能が正常動作
  - [ ] パフォーマンスが維持または改善
  - [ ] エラーが発生しない
  - [ ] API の互換性が保たれている

- [ ] **技術面**
  - [ ] 全テストが通過
  - [ ] ESLint・TypeScript エラーなし
  - [ ] ビルドが正常完了
  - [ ] ドキュメントが最新状態

### 改善効果の測定
- [ ] **Before/After比較**
  - [ ] コード行数の変化
  - [ ] 複雑度の変化
  - [ ] パフォーマンスの変化
  - [ ] テストカバレッジの変化

- [ ] **定量的効果**
  - [ ] ビルド時間: [Before] → [After]
  - [ ] テスト実行時間: [Before] → [After]
  - [ ] バンドルサイズ: [Before] → [After]
  - [ ] メモリ使用量: [Before] → [After]

### 成果物
- [ ] リファクタリングされたソースコード
- [ ] 更新されたテストコード
- [ ] 更新されたドキュメント
- [ ] リファクタリング完了レポート

## 6. 今後の改善提案

### 継続的改善
- [ ] **コード品質向上**
  - [ ] さらなるリファクタリング箇所の特定
  - [ ] コーディング規約の改善提案
  - [ ] レビュープロセスの改善提案

- [ ] **開発プロセス改善**
  - [ ] 技術負債の早期発見方法
  - [ ] 定期的なリファクタリング計画
  - [ ] 品質メトリクスの監視強化

---

**実施時の注意事項:**
- リファクタリング中は機能追加を行わない
- 各段階で必ずテストを実行し、動作確認を行う
- 想定以上に影響範囲が広がる場合は、一度停止して相談する
- パフォーマンスの悪化が見られた場合は、即座に報告する

**緊急時連絡先:**
- 技術的問題: [技術リードの連絡先]
- 仕様確認: [プロダクトオーナーの連絡先]
- プロジェクト管理: [プロジェクトマネージャーの連絡先]